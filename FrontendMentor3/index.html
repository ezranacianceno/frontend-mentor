<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  
  <title>Frontend Mentor | Interactive rating component</title>

  <link rel="stylesheet" href="./index.css">

  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

</head>
<body>
  <main>
    <section class="default-state">
      <div class="container">
        <div class="star-container">
          <img src="./images/icon-star.svg" alt="">
        </div>

        <h2>How did we do? </h2>
      
        <p> Please let us know how we did with your support request. All feedback is appreciated to help us improve our offering!</p>

        <div class="button-group">
          <button tabindex="1" class="rating-btn" id="rating-one">1</button>
          <button tabindex="2" class="rating-btn" id="rating-two">2</button>
          <button tabindex="3" class="rating-btn" id="rating-three">3</button>
          <button tabindex="4" class="rating-btn" id="rating-four">4</button>
          <button tabindex="5" class="rating-btn" id="rating-five">5</button>
        </div>
       
        
      
        <button class="submit-btn" type="submit">SUBMIT</button>
      </div>
      <!-- Rating state start -->
      
    
      <!-- Rating state end -->
    </section>

    <section class="thank-you-state">
      <!-- Thank you state start -->
      <div class="container">
        <img src="./images/illustration-thank-you.svg" alt="">
        <p class="rating">You selected <span class="actual-rating"></span> out of 5</p>
      
        <h2>Thank you!</h2>
  
        <p>We appreciate you taking the time to give a rating. If you ever need more support, donâ€™t hesitate to get in touch!</p>
      </div>

      <!-- Thank you state end -->
    </section>

  
  </main>

  <script>

    // listen for CLICK or key press on ENTER or SPACE
    function accessClick(event){
        if(event.type === 'click'){
            return true;
        }
        else if(event.type === 'keypress'){
            var code = event.charCode || event.keyCode;
            if((code === 32)|| (code === 13)){

              return true;
            }
        }
        else{
            return false;
        }
    }

    // selected rating will be displayed in thank you state

    let rating;

    $('.rating-btn').on('click keypress', function(event){
      if(accessClick(event) === true){

        rating = $(this).text();
        console.log(rating);
        $(".actual-rating").text(rating);

        // removes style of previously selected button
        if($('button').hasClass('selected-btn')){
          $('button').removeClass('selected-btn');
        }

        // add class to newly selected button
        if($(this).text() === rating){
          $(this).addClass('selected-btn');
        }


        console.log(this);
        // if (this !== rating) {
        //   $(this).removeClass('selected-btn');
        //   rating = $(this).text();
        // }
      }
    });

    // hide default state and show thank you state when submit button is clicked
    $('.submit-btn').on('click keypress', function(event){
      if(accessClick(event) === true){
        console.log('submitted');
        $(".default-state").css("display","none");

        $(".thank-you-state").css("display","flex");
      }
    });

  </script>

</body>
</html>